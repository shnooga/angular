{"ast":null,"code":"var _class;\nimport { Observable } from \"rxjs\";\nimport { JwtHelperService } from \"@auth0/angular-jwt\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport(Observable);\nexport class AuthenticationService {\n  constructor(router, httpClient) {\n    this.router = router;\n    this.httpClient = httpClient;\n  }\n  authenticate(user) {\n    this.httpClient.post('http://localhost:4000/signin', user).subscribe(response => {\n      if (response.token !== undefined) {\n        localStorage.token = response['token'];\n        this.router.navigate(['customer']);\n      }\n    });\n  }\n  isAuthenticated() {\n    const token = localStorage['token'];\n    return token != null && token != undefined;\n  }\n  isTokenExpired() {\n    const helper = new JwtHelperService();\n    return helper.isTokenExpired(localStorage['token']);\n  }\n  logout() {\n    localStorage.clear();\n  }\n}\n_class = AuthenticationService;\n_class.ɵfac = function AuthenticationService_Factory(t) {\n  return new (t || _class)(i0.ɵɵinject(i1.Router), i0.ɵɵinject(i2.HttpClient));\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["Observable","JwtHelperService","AuthenticationService","constructor","router","httpClient","authenticate","user","post","subscribe","response","token","undefined","localStorage","navigate","isAuthenticated","isTokenExpired","helper","logout","clear","i0","ɵɵinject","i1","Router","i2","HttpClient","factory","ɵfac","providedIn"],"sources":["/Users/huey.nguyen/code/angular/lab-observable/src/app/services/authentication.service.ts"],"sourcesContent":["import {Observable} from \"rxjs\";\nimport {AuthenticationResponse} from \"../model/httpresponses/AuthenticationResponse\";\nimport {User} from \"../model/user\";\nimport(Observable)\nimport {HttpClient} from \"@angular/common/http\";\nimport {Injectable} from \"@angular/core\";\nimport {JwtHelperService} from \"@auth0/angular-jwt\";\nimport {Router} from \"@angular/router\";\n\n@Injectable({providedIn: 'root'})\nexport class AuthenticationService {\n\n    constructor(private router: Router, private httpClient:HttpClient) {\n\n    }\n\n    authenticate(user:User) {\n        this.httpClient\n            .post<AuthenticationResponse>('http://localhost:4000/signin', user)\n            .subscribe((response: { token: string}) => {\n                if(response.token !== undefined) {\n                    localStorage.token = response['token'];\n                    this.router.navigate(['customer']);\n                }\n        });\n    }\n\n    isAuthenticated(): boolean {\n        const token = localStorage['token'];\n        return token != null && token != undefined;\n    }\n\n    isTokenExpired(): boolean {\n        const helper = new JwtHelperService();\n        return <boolean>helper.isTokenExpired(localStorage['token']);\n    }\n\n    logout() {\n        localStorage.clear();\n    }\n}\n"],"mappings":";AAAA,SAAQA,UAAU,QAAO,MAAM;AAM/B,SAAQC,gBAAgB,QAAO,oBAAoB;;;;AAHnD,MAAM,CAACD,UAAU,CAAC;AAOlB,OAAM,MAAOE,qBAAqB;EAE9BC,YAAoBC,MAAc,EAAUC,UAAqB;IAA7C,KAAAD,MAAM,GAANA,MAAM;IAAkB,KAAAC,UAAU,GAAVA,UAAU;EAEtD;EAEAC,YAAYA,CAACC,IAAS;IAClB,IAAI,CAACF,UAAU,CACVG,IAAI,CAAyB,8BAA8B,EAAED,IAAI,CAAC,CAClEE,SAAS,CAAEC,QAA0B,IAAI;MACtC,IAAGA,QAAQ,CAACC,KAAK,KAAKC,SAAS,EAAE;QAC7BC,YAAY,CAACF,KAAK,GAAGD,QAAQ,CAAC,OAAO,CAAC;QACtC,IAAI,CAACN,MAAM,CAACU,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC;;IAE9C,CAAC,CAAC;EACN;EAEAC,eAAeA,CAAA;IACX,MAAMJ,KAAK,GAAGE,YAAY,CAAC,OAAO,CAAC;IACnC,OAAOF,KAAK,IAAI,IAAI,IAAIA,KAAK,IAAIC,SAAS;EAC9C;EAEAI,cAAcA,CAAA;IACV,MAAMC,MAAM,GAAG,IAAIhB,gBAAgB,EAAE;IACrC,OAAgBgB,MAAM,CAACD,cAAc,CAACH,YAAY,CAAC,OAAO,CAAC,CAAC;EAChE;EAEAK,MAAMA,CAAA;IACFL,YAAY,CAACM,KAAK,EAAE;EACxB;;SA7BSjB,qBAAqB;;mBAArBA,MAAqB,EAAAkB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,MAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,UAAA;AAAA;;SAArBvB,MAAqB;EAAAwB,OAAA,EAArBxB,MAAqB,CAAAyB,IAAA;EAAAC,UAAA,EADT;AAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}